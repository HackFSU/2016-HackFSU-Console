{"version":3,"sources":["hackForm.js"],"names":[],"mappings":"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","file":"hackForm.js","sourcesContent":["/**\r\n * hackForm - Custom form validator\r\n *\r\n * TODO:\r\n * \t- multiple validators like: max[10]|email\r\n * \t- filters like : toUpper|toLower|trim\r\n * \t- fadeOut/in for end()\r\n */\r\n\r\n(function($) {\r\n\t'use strict';\r\n\r\n\t$.hackForm = {};\r\n\tlet validators = $.hackForm.validators = {\r\n\t\temail: function(val) {\r\n\t\t\tlet re = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i;\r\n\t\t\treturn re.test(val);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// let filters = $.hackForm.filters = {\r\n\t// \ttoUpper:\r\n\t// \tmax:\r\n\t// };\r\n\r\n\t$.widget('hackForm.hackField', {\r\n\t\toptions: {\r\n\t\t\tvalidator: undefined, // name or function(val) { return isValid }\r\n\t\t\trequired: false\r\n\t\t},\r\n\r\n\t\t_create: function() {\r\n\t\t\tconst o = this.options;\r\n\t\t\tconst e = this.element;\r\n\r\n\t\t\tif(!o.validator || !$.isFunction(o.validator) && !$.isFunction(validators[o.validator])) {\r\n\t\t\t\tthrow new Error('Invalid or missing type/validator: ' + o.validator);\r\n\t\t\t}\r\n\r\n\t\t\tthis.invalid = false;\r\n\t\t\tthis.label = o.label || e.closest('form').find('label[for=\"'+e.attr('id')+'\"]');\r\n\r\n\t\t\te.on('change', () => {\r\n\t\t\t\tthis.validate();\r\n\t\t\t}).on('keydown', () => {\r\n\t\t\t\tif(this.invalid) {\r\n\t\t\t\t\tthis.update();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tupdate: function() {\r\n\t\t\tif(this.updateTimeout) {\r\n\t\t\t\tclearTimeout(this.updateTimeout);\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.validate();\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t},\r\n\t\tvalidate: function() {\r\n\t\t\tconst e = this.element;\r\n\t\t\tconst o = this.options;\r\n\t\t\tlet val, valid;\r\n\r\n\r\n\t\t\t// Get value\r\n\t\t\tval = this.get();\r\n\r\n\t\t\t// Validate\r\n\t\t\tif(o.required && !val) {\r\n\t\t\t\tvalid = false;\r\n\t\t\t} else if($.isFunction(o.validator)) {\r\n\t\t\t\tvalid = this.validator(val);\r\n\t\t\t} else {\r\n\t\t\t\tvalid = validators[o.validator](val);\r\n\t\t\t}\r\n\r\n\t\t\t// Update UI\r\n\t\t\tthis.label.toggleClass('hackfield-error', !valid);\r\n\t\t\te.toggleClass('hackfield-error', !valid);\r\n\r\n\t\t\tif(this.invalid && valid) {\r\n\t\t\t\t// Validity fixed\r\n\t\t\t\tthis.invalid = valid;\r\n\t\t\t\tthis.trigger('correction');\r\n\t\t\t}\r\n\r\n\t\t\treturn valid;\r\n\t\t},\r\n\r\n\r\n\t\tget: function() {\r\n\t\t\tconst e = this.element;\r\n\t\t\tconst o = this.options;\r\n\r\n\t\t\tif($.isFunction(o.get)) {\r\n\t\t\t\treturn o.get();\r\n\t\t\t} else {\r\n\t\t\t\treturn e.val().trim();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$.widget('hackForm.hackForm', {\r\n\t\toptions: {\r\n\t\t\tfields: [],\r\n\t\t\tsuccessMessage: {\r\n\t\t\t\ttitle: 'Success!',\r\n\t\t\t\tsubtitle: undefined\r\n\t\t\t},\r\n\t\t\tfailureMessage: {\r\n\t\t\t\ttitle: 'An unexpected error has occured!',\r\n\t\t\t\tsubtitle: 'Refresh this window and try resubmitting.'\r\n\t\t\t},\r\n\t\t\tfadeTime: 500\r\n\t\t},\r\n\r\n\t\t_create: function() {\r\n\t\t\tconst e = this.element;\r\n\t\t\tconst o = this.options;\r\n\r\n\t\t\tthis.submitBtn = e.find('button[type=\"submit\"]');\r\n\r\n\t\t\t// Construct fields\r\n\t\t\tthis.fields = [];\r\n\t\t\to.fields.forEach((field) => {\r\n\t\t\t\tif(!field.element) {\r\n\t\t\t\t\tthrow new Error('Missing field element');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet $field = $(field.element);\r\n\r\n\t\t\t\tif($field.length !== 1) {\r\n\t\t\t\t\tthrow new Error('Missing or duplicate elements found for field');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.fields.push($field.hackField({\r\n\t\t\t\t\tvalidator: field.validator,\r\n\t\t\t\t\tlabel: field.label,\r\n\t\t\t\t\trequired: field.required || $field.prop('required')\r\n\t\t\t\t}));\r\n\t\t\t});\r\n\r\n\t\t\t// Handle error correction for all fields\r\n\t\t\tthis.valid = false;\r\n\t\t\te.on('correction', (ev) => {\r\n\t\t\t\tev.preventDefault();\r\n\t\t\t\tif(!this.valid) {\r\n\t\t\t\t\tlet numInvalid = 0;\r\n\t\t\t\t\tthis.fields.forEach(function(field) {\r\n\t\t\t\t\t\tif(field.is('.hackField-error')) {\r\n\t\t\t\t\t\t\t++numInvalid;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(numInvalid === 0) {\r\n\t\t\t\t\t\tthis.valid = false;\r\n\t\t\t\t\t\tthis.trigger('correction');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\r\n\t\t},\r\n\r\n\t\tvalidate: function() {\r\n\t\t\tlet valid = true;\r\n\r\n\t\t\tthis.fields.forEach((field) => {\r\n\t\t\t\tif(!field.hackField('validate')) {\r\n\t\t\t\t\tvalid = false;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.valid = valid;\r\n\r\n\t\t\treturn valid;\r\n\t\t},\r\n\r\n\t\tget: function() {\r\n\t\t\tlet vals = {};\r\n\t\t\tlet name;\r\n\r\n\t\t\tthis.fields.forEach((field) => {\r\n\t\t\t\tname = field.attr('name');\r\n\t\t\t\tif(!name || vals[name]) {\r\n\t\t\t\t\tthrow new Error('Missing or duplicate field name attribute');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvals[name] = field.hackField('get');\r\n\t\t\t});\r\n\r\n\t\t\treturn vals;\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t * Called after ajax submission\r\n\t\t * - Specific to site\r\n\t\t */\r\n\t\tend: function(err) {\r\n\t\t\tconst e = this.element;\r\n\t\t\tconst o = this.options;\r\n\t\t\tlet message = err? o.failureMessage : o.successMessage;\r\n\t\t\tlet html;\r\n\r\n\t\t\t// Get predefined message\r\n\r\n\r\n\t\t\t// Clean out form of non-end messages\r\n\t\t\thtml = e.find('.hackform-' + (err? 'failure' : 'success'));\r\n\t\t\te.children().not(html).remove();\r\n\t\t\thtml.show();\r\n\r\n\t\t\tconsole.log(html);\r\n\r\n\t\t\tif(html.length === 0) {\r\n\t\t\t\tif(err) {\r\n\t\t\t\t\tmessage.subtitle = err;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.append('<div class=\"form-complete\">' +\r\n\t\t\t\t\t(message.title? `<h2>${message.title}</h2>` : '') +\r\n\t\t\t\t\t(message.subtitle? `<p>${message.subtitle}</p>` : '') +\r\n\t\t\t\t'</div>');\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\t});\r\n\r\n})(jQuery);\r\n"],"sourceRoot":"/es6"}