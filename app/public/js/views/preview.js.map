{"version":3,"sources":["preview.js"],"names":[],"mappings":";;;;;;;;;;;;AAWA,CAAC,UAAS,CAAC,EAAE;AACZ,aAAY,CAAC;;AAEb,KAAI,IAAI,GAAG,CAAC,CAAC,oCAAoC,CAAC,CAAC;AACnD,KAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;AACnD,KAAI,UAAU,GAAG,KAAK,CAAC;;AAGvB,KAAI,KAAK,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;;AAExB,KAAG,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE;;AAExB,OAAK,CAAC,KAAK,CAAC,2EAA2E,CAAC,CAAC;EACzF;;AAED,KAAI,CAAC,QAAQ,CAAC;AACb,QAAM,EAAE,CAAC;AACR,UAAO,EAAE,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC;AACzC,YAAS,EAAE,OAAO;GAClB,CAAC;EACF,CAAC,CAAC;;AAEH,KAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAS,EAAE,EAAE;AAC9B,IAAE,CAAC,cAAc,EAAE,CAAC;;AAEpB,MAAG,UAAU,EAAE;AACd,UAAO;GACP;;AAED,YAAU,GAAG,IAAI,CAAC;AAClB,MAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;AAC7B,IAAC,CAAC,IAAI,CAAC;AACN,QAAI,EAAE,MAAM;AACZ,OAAG,EAAE,oBAAoB;AACzB,QAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AAC1C,eAAW,EAAE,kBAAkB;AAC/B,WAAO,EAAE,iBAAS,GAAG,EAAE;AACtB,MAAC,CAAC,kBAAkB,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,EAAE,YAAW;AAChD,OAAC,CAAC,kBAAkB,CAAC,CAAC,MAAM,EAAE;;AAAC,AAE/B,OAAC,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC;AACtB,gBAAS,EAAE,CAAC;OACb,EAAE,GAAG,CAAC,CAAC;AACR,OAAC,CAAC,mBAAmB,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,YAAW;;OAE9C,CAAC,CAAC;MACH,CAAC,CAAC;;AAEH,eAAU,GAAG,KAAK,CAAC;KACnB;AACD,SAAK,EAAE,eAAS,GAAG,EAAE;AACpB,SAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AAC1B,MAAC,CAAC,eAAe,CAAC,CAAC,MAAM,EAAE,CAAC;AAC5B,eAAU,GAAG,KAAK,CAAC;KACnB;IACD,CAAC,CAAC;GACH,MAAM;AACN,YAAS,CAAC,OAAO,EAAE,CAAC;AACpB,aAAU,GAAG,KAAK,CAAC;GACnB;EAED,CAAC,CAAC;;AAEH,UAAS,CAAC,EAAE,CAAC,OAAO,EAAE,YAAW;AAChC,MAAI,CAAC,MAAM,EAAE,CAAC;EACd,CAAC,CAAC;CAIH,CAAA,CAAE,MAAM,CAAC,CAAC","file":"preview.js","sourcesContent":["/**\r\n * Preview page\r\n *\r\n * Dependencies:\r\n * \t- jQuery\r\n * \t- hackform\r\n *\r\n * Handles form submission for email subscribing\r\n */\r\n\r\n\r\n(function($) {\r\n\t'use strict';\r\n\r\n\tlet form = $('form[name=\"previewEmailSubscribe\"]');\r\n\tlet submitBtn = form.find('button[type=\"submit\"]');\r\n\tlet submitting = false;\r\n\r\n\r\n\tlet video = $('#video');\r\n\r\n\tif(video.is(':visible')) {\r\n\t\t// Non-mobile, add video\r\n\t\tvideo.after('<video src=\"/res/hackfsu15-loop.mp4\" loop=\"true\" autoplay=\"true\"></video>');\r\n\t}\r\n\r\n\tform.hackForm({\r\n\t\tfields: [{\r\n\t\t\telement: form.find('input[name=\"email\"]'),\r\n\t\t\tvalidator: 'email'\r\n\t\t}]\r\n\t});\r\n\r\n\tform.on('submit', function(ev) {\r\n\t\tev.preventDefault();\r\n\r\n\t\tif(submitting) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsubmitting = true;\r\n\t\tif(form.hackForm('validate')) {\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'post',\r\n\t\t\t\turl: '/preview/subscribe',\r\n\t\t\t\tdata: JSON.stringify(form.hackForm('get')),\r\n\t\t\t\tcontentType: 'application/json',\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t$('#preview-content').fadeTo(1000, 0, function() {\r\n\t\t\t\t\t\t$('#preview-content').remove();\r\n\t\t\t\t\t\t//form.hackForm('end', res.err);\r\n\t\t\t\t\t\t$(\"html, body\").animate({\r\n\t\t\t\t\t\t\t\tscrollTop: 0\r\n\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t$('.hackform-success').fadeIn(1000, function() {\r\n\t\t\t\t\t\t\t//return\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsubmitting = false;\r\n\t\t\t\t},\r\n\t\t\t\terror: function(err) {\r\n\t\t\t\t\tform.hackForm('end', err);\r\n\t\t\t\t\t$('#be-the-first').remove();\r\n\t\t\t\t\tsubmitting = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsubmitBtn.shakeIt();\r\n\t\t\tsubmitting = false;\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tsubmitBtn.on('click', function() {\r\n\t\tform.submit();\r\n\t});\r\n\r\n\r\n\r\n})(jQuery);\r\n"],"sourceRoot":"/es6"}