{"version":3,"sources":["preview.js"],"names":[],"mappings":";;;;;;;;;;;;AAWA,CAAC,UAAS,CAAC,EAAE;AACZ,aAAY,CAAC;;AAEb,KAAI,IAAI,GAAG,CAAC,CAAC,oCAAoC,CAAC,CAAC;AACnD,KAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;AACnD,KAAI,UAAU,GAAG,KAAK,CAAC;;AAGvB,KAAI,KAAK,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;;AAExB,KAAG,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE;;AAExB,OAAK,CAAC,KAAK,CAAC,2EAA2E,CAAC,CAAC;EACzF;;AAED,KAAI,CAAC,QAAQ,CAAC;AACb,QAAM,EAAE,CAAC;AACR,UAAO,EAAE,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC;AACzC,YAAS,EAAE,OAAO;GAClB,CAAC;EACF,CAAC,CAAC;;AAEH,KAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAS,EAAE,EAAE;AAC9B,IAAE,CAAC,cAAc,EAAE,CAAC;;AAEpB,MAAG,UAAU,EAAE;AACd,UAAO;GACP;;AAED,YAAU,GAAG,IAAI,CAAC;AAClB,MAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;AAC7B,IAAC,CAAC,IAAI,CAAC;AACN,QAAI,EAAE,MAAM;AACZ,OAAG,EAAE,oBAAoB;AACzB,QAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AAC1C,eAAW,EAAE,kBAAkB;AAC/B,WAAO,EAAE,iBAAS,GAAG,EAAE;AACtB,MAAC,CAAC,kBAAkB,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,EAAE,YAAW;AAChD,OAAC,CAAC,kBAAkB,CAAC,CAAC,MAAM,EAAE;;AAAC,AAE/B,OAAC,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC;AACtB,gBAAS,EAAE,CAAC;OACb,EAAE,GAAG,CAAC,CAAC;AACR,OAAC,CAAC,mBAAmB,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,YAAW;;OAE9C,CAAC,CAAC;MACH,CAAC,CAAC;;AAEH,eAAU,GAAG,KAAK,CAAC;KACnB;AACD,SAAK,EAAE,eAAS,GAAG,EAAE;AACpB,SAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AAC1B,MAAC,CAAC,eAAe,CAAC,CAAC,MAAM,EAAE,CAAC;AAC5B,eAAU,GAAG,KAAK,CAAC;KACnB;IACD,CAAC,CAAC;GACH,MAAM;AACN,YAAS,CAAC,OAAO,EAAE,CAAC;AACpB,aAAU,GAAG,KAAK,CAAC;GACnB;EAED,CAAC,CAAC;;AAEH,UAAS,CAAC,EAAE,CAAC,OAAO,EAAE,YAAW;AAChC,MAAI,CAAC,MAAM,EAAE,CAAC;EACd,CAAC,CAAC;CAIH,CAAA,CAAE,MAAM,CAAC,CAAC","file":"preview.js","sourcesContent":["/**\n * Preview page\n *\n * Dependencies:\n * \t- jQuery\n * \t- hackform\n *\n * Handles form submission for email subscribing\n */\n\n\n(function($) {\n\t'use strict';\n\n\tlet form = $('form[name=\"previewEmailSubscribe\"]');\n\tlet submitBtn = form.find('button[type=\"submit\"]');\n\tlet submitting = false;\n\n\n\tlet video = $('#video');\n\n\tif(video.is(':visible')) {\n\t\t// Non-mobile, add video\n\t\tvideo.after('<video src=\"/res/hackfsu15-loop.mp4\" loop=\"true\" autoplay=\"true\"></video>');\n\t}\n\n\tform.hackForm({\n\t\tfields: [{\n\t\t\telement: form.find('input[name=\"email\"]'),\n\t\t\tvalidator: 'email'\n\t\t}]\n\t});\n\n\tform.on('submit', function(ev) {\n\t\tev.preventDefault();\n\n\t\tif(submitting) {\n\t\t\treturn;\n\t\t}\n\n\t\tsubmitting = true;\n\t\tif(form.hackForm('validate')) {\n\t\t\t$.ajax({\n\t\t\t\ttype: 'post',\n\t\t\t\turl: '/preview/subscribe',\n\t\t\t\tdata: JSON.stringify(form.hackForm('get')),\n\t\t\t\tcontentType: 'application/json',\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t$('#preview-content').fadeTo(1000, 0, function() {\n\t\t\t\t\t\t$('#preview-content').remove();\n\t\t\t\t\t\t//form.hackForm('end', res.err);\n\t\t\t\t\t\t$(\"html, body\").animate({\n\t\t\t\t\t\t\t\tscrollTop: 0\n\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t$('.hackform-success').fadeIn(1000, function() {\n\t\t\t\t\t\t\t//return\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tsubmitting = false;\n\t\t\t\t},\n\t\t\t\terror: function(err) {\n\t\t\t\t\tform.hackForm('end', err);\n\t\t\t\t\t$('#be-the-first').remove();\n\t\t\t\t\tsubmitting = false;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tsubmitBtn.shakeIt();\n\t\t\tsubmitting = false;\n\t\t}\n\n\t});\n\n\tsubmitBtn.on('click', function() {\n\t\tform.submit();\n\t});\n\n\n\n})(jQuery);\n"],"sourceRoot":"/es6"}